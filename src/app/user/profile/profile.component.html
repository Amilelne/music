<div class="profile">
  <ng-container *ngIf="(authService._user | async) as user">
    <form
      nz-form
      [formGroup]="validateForm"
      (ngSubmit)="submitForm($event, validateForm.value)"
    >
      <h3>个人信息</h3>
      <nz-form-item>
        <nz-form-label [nzSpan]="7" nzRequired>昵称</nz-form-label>
        <nz-form-control [nzSpan]="12" nzHasFeedback>
          <input nz-input formControlName="name" [value]="user.name" />
          <nz-form-explain
            *ngIf="
              validateForm.get('name').dirty && validateForm.get('name').errors
            "
          >
            <ng-container *ngIf="validateForm.get('name').hasError('required')">
              请输入您的昵称
            </ng-container>
          </nz-form-explain>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label [nzSpan]="7" nzRequired>性别</nz-form-label>
        <nz-form-control [nzSpan]="12">
          <nz-radio-group formControlName="sex">
            <label nz-radio nzValue="0">保密</label>
            <label nz-radio nzValue="1">男</label>
            <label nz-radio nzValue="2">女</label>
          </nz-radio-group>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label [nzSpan]="7" nzRequired>工作</nz-form-label>
        <div>
          <nz-form-control [nzSpan]="12" nzHasFeedback>
            <input
              nz-input
              type="text"
              formControlName="work"
              [value]="user.work ? user.work : ''"
            />
            <nz-form-explain
              *ngIf="
                validateForm.get('work').dirty &&
                validateForm.get('work').hasError('required')
              "
              >请输入您的工作</nz-form-explain
            >
          </nz-form-control>
        </div>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label [nzSpan]="7" nzRequired>城市</nz-form-label>
        <nz-form-control [nzSpan]="12" nzHasFeedback>
          <input
            nz-input
            type="text"
            formControlName="city"
            [value]="user.city ? user.city : ''"
          />
          <nz-form-explain
            *ngIf="
              validateForm.get('city').dirty &&
              validateForm.get('city').hasError('required')
            "
          >
          </nz-form-explain>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label [nzSpan]="7" nzRequired>自我介绍</nz-form-label>
        <nz-form-control [nzSpan]="12" nzHasFeedback>
          <textarea
            formControlName="introduction"
            nz-input
            rows="2"
            type="text"
            [value]="user.introduction ? user.introduction : ''"
          ></textarea>
          <nz-form-explain
            *ngIf="
              validateForm.get('introduction').dirty &&
              validateForm.get('introduction').hasError('required')
            "
            >说说关于您的东西吧</nz-form-explain
          >
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-control [nzOffset]="7" [nzSpan]="12">
          <button nz-button nzType="primary" [disabled]="!validateForm.valid">
            保存
          </button>
          <button nz-button (click)="resetForm($event)">重置</button>
        </nz-form-control>
      </nz-form-item>
    </form>
  </ng-container>
</div>
