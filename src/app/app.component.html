<nz-layout>
  <nz-header>
    <ul nz-menu [nzTheme]="'dark'" [nzMode]="'horizontal'">
      <li nz-menu-item routerLink="/" routerLinkActive="active">首页</li>
      <li nz-menu-item routerLink="/courses" routerLinkActive="active">课程</li>
      <li nz-menu-item routerLink="/practices" routerLinkActive="active">
        练习
      </li>
      <li nz-menu-item routerLink="/experts" routerLinkActive="active">专家</li>
      <!--Admin-->
      <ng-container
        *ngIf="
          (authService.isLoggedIn$ | async) &&
          (authService._user | async)?.role == 'admin'
        "
      >
        <li nz-menu-item routerLink="/admin" routerLinkActive="active">管理</li>
      </ng-container>

      <!--Auth-->
      <ng-container *ngIf="!(authService.isLoggedIn$ | async)">
        <li
          nz-menu-item
          routerLink="/login"
          routerLinkActive="active"
          class="nav-right"
        >
          登录
        </li>
        <li
          nz-menu-item
          routerLink="/register"
          routerLinkActive="active"
          class="nav-right"
        >
          注册
        </li>
      </ng-container>
      <ng-container *ngIf="(authService.isLoggedIn$ | async)">
        <li
          nz-menu-item
          nz-popover
          nzType="primary"
          [nzTitle]="userTitle"
          [nzContent]="userContent"
          class="nav-right"
        >
          <nz-avatar
            nzIcon="user"
            style="background-color:#fff;"
            [nzSrc]="(authService._user | async)?.avatar"
          ></nz-avatar>
        </li>
        <ng-template #userTitle>
          <nz-avatar
            nzIcon="user"
            [nzSize]="64"
            [nzSrc]="(authService._user | async)?.avatar"
          ></nz-avatar>
          <p>{{ authService._user?.name }}</p>
        </ng-template>
        <ng-template #userContent>
          <button
            nz-button
            nzType="default"
            routerLink="/"
            routerLinkActive="active"
          >
            我的课程
          </button>
          <button
            nz-button
            nzType="default"
            routerLink="/user/"
            routerLinkActive="active"
          >
            个人设置
          </button>
          <button
            nz-button
            nzType="danger"
            routerLink="/login"
            routerLinkActive="active"
            (click)="authService.logout()"
          >
            退出登录
          </button>
        </ng-template>
      </ng-container>
    </ul>
  </nz-header>
  <nz-content> <router-outlet></router-outlet> </nz-content>
  <app-footer></app-footer>
</nz-layout>
